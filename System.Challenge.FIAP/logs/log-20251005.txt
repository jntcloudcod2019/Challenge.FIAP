2025-10-05 12:30:32.947 -03:00 [INF] Iniciando FIAP Challenge API
2025-10-05 12:30:33.103 -03:00 [INF] Connection String configurada22025-10-05 12:30:33.121 -03:00 [INF] SQL Server configurado com Db2025-10-05 12:32025-10-05 12:30:33.391 -03:00 [INF] FIAP Challenge API iniciada e2025-10-05 12:30:33.391 -03:00 [INF] 2025-10-05 12:30:33.392 -03:00 [INF] Tentativa 1/3 de iniciar a ap2025-10-052025-10-05 12:31:20.467 -03:00 [WRN] Failed to determine the https2025-10-05 12:31:20.2025-10-05 12:31:20.724 -03:00 [ERR] HTTP POST /api/Auth/login res2025-10-05 12:31:20.724 -03:00 [ERR] HTTP POST /api/Auth/login responded 500 in 283.1002 ms
System.InvalidOperationException: Cannot resolve scoped service 'System.Collections.Generic.IEnumerable`1[Microsoft.EntityFrameworkCore.Infrastructure.IDbContextOptionsConfiguration`1[System.Challenge.FIAP.Data.ContextDB]]' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.OnResolve(ServiceCallSite callSite, IServiceScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetServices[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.As2025-10-05 12:31:20.772 -03:00 [ERR] An unhandled exception has oc2025-10-05 12:31:20.772 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Cannot resolve scoped service 'System.Collections.Generic.IEnumerable`1[Microsoft.EntityFrameworkCore.Infrastructure.IDbContextOptionsConfiguration`1[System.Challenge.FIAP.Data.ContextDB]]' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.OnResolve(ServiceCallSite callSite, IServiceScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetServices[T](IServiceProvider provider)
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitRootCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics2025-10-05 12:34:00.818 -03:00 [INF] Aplicação encerrada
ntext)
2025-10-05 12:34:00.818 -03:00 [INF] Aplicação encerrada
2025-10-05 12:42:09.104 -03:00 [INF] Iniciando FIAP Challenge API
2025-10-05 12:42:09.304 -03:00 [INF] Connection String configurada22025-10-05 12:42:09.311 -03:00 [INF] SQL Server configurado com Db2025-10-05 12:42025-10-05 12:42:09.600 -03:00 [INF] FIAP Challenge API iniciada e2025-10-05 12:42:09.600 -03:00 [INF] 2025-10-05 12:42:09.603 -03:00 [INF] Tentativa 1/3 de iniciar a ap2025-10-052025-10-05 12:47:42.504 -03:00 [WRN] Failed to determine the https2025-10-05 12:47:42.2025-10-05 12:47:43.182 -03:00 [INF] JWT Settings carregados e val2025-102025-10-05 12:47:44.221 -03:00 [ERR] Erro ao realizar login: jonat2025-10-05 12:47:44.221 -03:00 [ERR] Erro ao realizar login: jonathanfrnnd3@gmail.com.com
System.InvalidOperationException: The property 'User.UpdatedAt' cannot be marked as nullable/optional because the type of the property is 'DateTime' which is not a nullable type. Any property can be marked as non-nullable/required, but only properties of nullable types can be marked as nullable/optional.
   at Microsoft.EntityFrameworkCore.Metadata.Internal.Property.SetIsNullable(Nullable`1 nullable, ConfigurationSource configurationSource)
   at Microsoft.EntityFrameworkCore.Metadata.Internal.InternalPropertyBuilder.IsRequired(Nullable`1 required, ConfigurationSource configurationSource)
   at Microsoft.EntityFrameworkCore.Metadata.Builders.PropertyBuilder.IsRequired(Boolean required)
   at Microsoft.EntityFrameworkCore.Metadata.Builders.PropertyBuilder`1.IsRequired(Boolean required)
   at System.Challenge.FIAP.Data.ContextDB.<>c.<OnModelCreating>b__41_0(EntityTypeBuilder`1 entity) in /Users/worldgames/Documents/Fiap/System.Challenge.FIAP/System.Challenge.FIAP/Data/ContextDB.cs:line 69
   at Microsoft.EntityFrameworkCore.ModelBuilder.Entity[TEntity](Action`1 buildAction)
   at System.Challenge.FIAP.Data.ContextDB.OnModelCreating(ModelBuilder modelBuilder) in /Users/worldgames/Documents/Fiap/System.Challenge.FIAP/System.Challenge.FIAP/Data/ContextDB.cs:line 28
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelCustomizer.Customize(ModelBuilder modelBuilder, DbContext context)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, IConventionSetBuilder conventionSetBuilder, ModelDependencies modelDependencies)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.DbContext.DisposeSync(Boolean leaseActive, Boolean contextShouldBeDisposed)
   at Microsoft.EntityFrameworkCore.DbContext.DisposeAsync()
   at System.Challenge.FIAP.Data.UserRepository.GetUserByEmailAsync(String email) in /Users/worldgames/Documents/Fiap/System.Challenge.FIAP/System.Challenge.FIAP/Data/UserRepository.cs:line 25
   at System.Challenge.FIAP.Services.AuthService.LoginAsync(LoginUserRequest request) in /Users/worldgames/Documents/Fiap/System.Chal2025-10-05 12:47:44.344 -03:00 [INF] HTTP POST /api/Auth/login res2025-10-05 12:47:44.344 -032025-10-05 12:49:02.266 -03:00 [INF] Aplicação encerrada
425 ms
2025-10-05 12:49:02.266 -03:00 [INF] Aplicação encerrada
2025-10-05 12:50:35.912 -03:00 [INF] Iniciando FIAP Challenge API
2025-10-05 12:50:36.501 -03:00 [INF] Connection String configurada22025-10-05 12:50:36.704 -03:00 [INF] SQL Server configurado com Db2025-10-05 12:52025-10-05 12:50:37.888 -03:00 [INF] FIAP Challenge API iniciada e2025-10-05 12:50:37.888 -03:00 [INF] 2025-10-05 12:50:37.891 -03:00 [INF] Tentativa 1/3 de iniciar a ap2025-10-052025-10-05 13:39:37.044 -03:00 [WRN] Failed to determine the https2025-10-05 13:39:37.2025-10-05 13:39:37.657 -03:00 [INF] JWT Settings carregados e val2025-102025-10-05 13:39:39.226 -03:00 [WRN] Sensitive data logging is ena2025-10-05 13:39:39.226 -03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive appli2025-10-05 13:39:40.992 -03:00 [ERR] An error occurred using the c2025-10-05 13:39:40.992 -03:00 [ERR] An2025-10-05 13:39:41.078 -03:00 [ERR] An exception occurred while i2025-10-05 13:39:41.078 -03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'System.Challenge.FIAP.Data.ContextDB'.
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Microsoft.Data.SqlClient.SqlConnection.PermissionDemand()
   at Microsoft.Data.SqlClient.SqlConnectionFactory.PermissionDemand(DbConnection outerConnection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Microsoft.Data.SqlClient.SqlConnection.PermissionDemand()
   at Microsoft.Data.SqlClient.SqlConnectionFactory.PermissionDemand(DbConnection outerConnection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.In2025-10-05 13:39:41.624 -03:00 [ERR] Erro ao realizar login: jonat2025-10-05 13:39:41.624 -03:00 [ERR] Erro ao realizar login: jonathanfrnnd3@gmail.com.com
System.InvalidOperationException: The ConnectionString property has not been initialized.
   at Microsoft.Data.SqlClient.SqlConnection.PermissionDemand()
   at Microsoft.Data.SqlClient.SqlConnectionFactory.PermissionDemand(DbConnection outerConnection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at System.Challenge.FIAP.Data.UserRepository.GetUserByEmailAsync(String email) in /Users/worldgames/Documents/Fiap/System.Challenge.FIAP/System.Challenge.FIAP/Data/UserRepository.cs:line 25
   at System.Challenge.FIAP.Data.UserRepository.GetUserByEmailAsync(String email) in /Users/worldgames/Documents/Fiap/System.Challenge.FIAP/System.Challenge.FIAP/Data/UserRepository.cs:line 25
   at System.Challenge.FIAP.Services.AuthService.LoginAsync(LoginUserRequest request) in /Users/worldgames/Documents/Fiap/System.Chal2025-10-05 13:39:41.710 -03:00 [INF] HTTP POST /api/Auth/login res2025-10-05 13:39:41.710 -032025-10-05 13:43:05.841 -03:00 [INF] Aplicação encerrada
165 ms
2025-10-05 13:43:05.841 -03:00 [INF] Aplicação encerrada
2025-10-05 16:20:22.677 -03:00 [INF] Iniciando FIAP Challenge API
2025-10-05 16:20:23.069 -03:00 [INF] Connection String configurada22025-10-05 16:20:23.091 -03:00 [INF] SQL Server configurado com Db2025-10-05 16:22025-10-05 16:20:23.094 -03:00 [INF] Testando conexão com banco d2025-10-05 2025-10-05 16:20:25.248 -03:00 [WRN] Sensitive data logging is ena2025-10-05 16:20:25.248 -03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive appli2025-10-05 16:20:31.454 -03:00 [INF] Executed DbCommand (1,239ms) 2025-10-05 16:20:31.454 -03:00 [INF] Executed DbCommand (1,239ms) [P2025-10-05 16:20:31.592 -03:00 [FTL]  ERRO CRÍTICO: Falha ao t2025-10-05 16:20:31.592 -03:00 [FTL]  ERRO CRÍTICO: Falha ao testar conexão com banco de dados
System.InvalidOperationException: Invalid operation. The connection is closed.
   at Microsoft.Data.SqlClient.SqlConnection.GetOpenTdsConnection()
   at Microsoft.Data.SqlClient.SqlConnection.get_ServerVersion()
   at Program.<Main>$(String[] args) in /Users/worldgames/Documents/Fiap/System.Challenge.FIAP/System.Challenge.FIAP/Program.cs:line 78
   at Program.<Main>$(String[] args) in /Users/worldgames/Documents/Fi2025-10-05 16:20:31.660 -03:00 [FTL] Verifique se o SQL Server est2025-10-05 16:20:31.660 -03:00 [FTL] Verifique se o SQL Server está acessível e as credenciais estão corretas
2025-10-05 16:43:33.276 -03:00 [INF] Iniciando FIAP Challenge API
2025-10-05 16:43:33.597 -03:00 [INF] Connection String configurada2025-10-05 16:43:33.597 -03:00 [INF] Connection String configurada: Server=gondola.proxy.rlwy.net,32468;Database=FiapChallengeDB;User Id=sa;Password=***OCULTA***;TrustS2025-10-05 16:43:33.638 -03:00 [INF] SQL Server configurado com Db2025-10-05 16:42025-10-05 16:43:33.638 -03:00 [INF] Testando conexão com banco d2025-10-05 2025-10-05 16:43:35.811 -03:00 [WRN] Sensitive data logging is ena2025-10-05 16:43:35.811 -03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive appli2025-10-05 16:43:40.161 -03:00 [INF] Executed DbCommand (241ms) [P2025-10-05 16:43:40.161 -03:00 [INF] Executed DbCommand (241ms) [P2025-10-05 16:43:40.199 -03:00 [INF]  Conexão com banco de dad2025-10-05 16:43:40.199 -03:02025-10-05 16:43:40.200 -03:00 [INF]  Servidor: gondola.proxy.2025-10-05 16:42025-10-05 16:43:40.200 -03:00 [INF] 💾 Database: FiapChallengeD202025-10-05 16:43:40.201 -03:00 [INF]  Versão: 16.00.4215
2025-10-05 16:43:41.376 -03:00 [INF] Executed DbCommand (228ms) [P2025-10-05 16:43:41.376 -03:00 [INF] Executed DbCommand (228ms) [Parameters=[], CommandType='2025-10-05 16:43:41.489 -03:00 [INF] 👥 Total de usuários na ba2025-12025-10-05 16:43:41.939 -03:00 [INF] FIAP Challenge API iniciada e2025-10-05 16:43:41.939 -03:00 [INF] 2025-10-05 16:43:41.941 -03:00 [INF] Tentativa 1/3 de iniciar a ap2025-10-052025-10-05 16:54:36.899 -03:00 [WRN] Failed to determine the https2025-10-05 16:54:36.2025-10-05 16:54:38.515 -03:00 [INF] JWT Settings carregados e val2025-102025-10-05 16:54:41.330 -03:00 [INF] Executed DbCommand (195ms) [P2025-10-05 16:54:41.330 -03:00 [INF] Executed DbCommand (195ms) [Parameters=[@__email_0='jonathanfrnnd3@gmail.com.com' (Size = 200)], CommandType='"Text"', CommandTimeout='90']
SELECT TOP(1) [u].[IdUser], [u].[CreatedAt], [u].[Document], [u].[Email], [u].[FullName], [u].[Password], [u].[Role], [u].[StatusAccount], [2025-10-05 16:54:41.364 -03:00 [WRN] Tentativa de login com email 2025-10-05 16:54:41.364 -03:00 [WRN] Tentativa2025-10-05 16:54:41.475 -03:00 [INF] HTTP POST /api/Auth/login res2025-10-05 16:54:41.475 -032025-10-05 16:54:55.337 -03:00 [INF] Executed DbCommand (152ms) [P2025-10-05 16:54:55.337 -03:00 [INF] Executed DbCommand (152ms) [Parameters=[@__email_0='jonathanfrnnd3@gmail.com' (Size = 200)], CommandType='"Text"', CommandTimeout='90']
SELECT TOP(1) [u].[IdUser], [u].[CreatedAt], [u].[Document], [u].[Email], [u].[FullName], [u].[Password], [u].[Role], [u].[StatusAccount], [2025-10-05 16:54:57.272 -03:00 [WRN] Tentativa de login com senha 2025-10-05 16:54:57.272 -03:00 [WRN]2025-10-05 16:54:57.341 -03:00 [INF] HTTP POST /api/Auth/login res2025-10-05 16:54:57.341 -032025-10-05 16:55:48.178 -03:00 [INF] Executed DbCommand (180ms) [P2025-10-05 16:55:48.178 -03:00 [INF] Executed DbCommand (180ms) [Parameters=[@__email_0='jonathanfrnnd3@gmail.com' (Size = 200)], CommandType='"Text"', CommandTimeout='90']
SELECT TOP(1) [u].[IdUser], [u].[CreatedAt], [u].[Document], [u].[Email], [u].[FullName], [u].[Password], [u].[Role], [u].[StatusAccount], [2025-10-05 16:55:48.583 -03:00 [WRN] Tentativa de login com senha 2025-10-05 16:55:48.583 -03:00 [WRN]2025-10-05 16:55:48.605 -03:00 [INF] HTTP POST /api/Auth/login res2025-10-05 16:55:48.605 -032025-10-05 17:09:00.204 -03:00 [INF] HTTP POST /api/User responded2025-10-05 17:09:00.2025-10-05 18:57:10.669 -03:00 [INF] HTTP POST /api/User responded2025-10-05 18:57:10.2025-10-05 18:57:37.532 -03:00 [INF] Aplicação encerrada
699 ms
2025-10-05 18:57:37.532 -03:00 [INF] Aplicação encerrada
2025-10-05 18:59:43.106 -03:00 [INF] Iniciando FIAP Challenge API
2025-10-05 18:59:43.342 -03:00 [INF] Connection String configurada2025-10-05 18:59:43.342 -03:00 [INF] Connection String configurada: Server=gondola.proxy.rlwy.net,32468;Database=FiapChallengeDB;User Id=sa;Password=***OCULTA***;TrustS2025-10-05 18:59:43.357 -03:00 [INF] SQL Server configurado com Db2025-10-05 18:52025-10-05 18:59:43.357 -03:00 [INF] Testando conexão com banco d2025-10-05 2025-10-05 18:59:44.954 -03:00 [WRN] Sensitive data logging is ena2025-10-05 18:59:44.954 -03:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive appli2025-10-05 18:59:47.979 -03:00 [INF] Executed DbCommand (186ms) [P2025-10-05 18:59:47.979 -03:00 [INF] Executed DbCommand (186ms) [P2025-10-05 18:59:48.131 -03:00 [INF]  Conexão com banco de dad2025-10-05 18:59:48.131 -03:02025-10-05 18:59:48.139 -03:00 [INF]  Servidor: gondola.proxy.2025-10-05 18:52025-10-05 18:59:48.141 -03:00 [INF] 💾 Database: FiapChallengeD202025-10-05 18:59:48.141 -03:00 [INF]  Versão: 16.00.4215
2025-10-05 18:59:49.226 -03:00 [INF] Executed DbCommand (292ms) [P2025-10-05 18:59:49.226 -03:00 [INF] Executed DbCommand (292ms) [Parameters=[], CommandType='2025-10-05 18:59:49.984 -03:00 [INF] 👥 Total de usuários na ba2025-12025-10-05 18:59:51.065 -03:00 [INF] FIAP Challenge API iniciada e2025-10-05 18:59:51.065 -03:00 [INF] 2025-10-05 18:59:51.071 -03:00 [INF] Tentativa 1/3 de iniciar a ap2025-10-052025-10-05 19:00:25.139 -03:00 [WRN] As of ""2025-10-05T22:00:24.82025-10-05 19:00:25.139 -03:00 [WRN] As of ""2025-10-05T22:00:24.8044460+00:00"", the heartbeat has been running for ""00:00:01.8841687"" which is longer t2025-10-05 19:35:35.920 -03:00 [WRN] As of ""2025-10-05T22:35:34.62025-10-05 19:35:35.920 -03:00 [WRN] As of ""2025-10-05T22:35:34.6446140+00:00"", the heartbeat has been running for ""00:00:01.0527391"" which is longer t2025-10-05 19:37:41.528 -03:00 [WRN] Failed to determine the https2025-10-05 19:37:41.2025-10-05 19:37:46.438 -03:00 [INF] Executed DbCommand (242ms) [P2025-10-05 19:37:46.438 -03:00 [INF] Executed DbCommand (242ms) [Parameters=[@__email_0='admin@fiap.com.br' (Size = 200)], CommandType='"Text"', CommandTimeout='90']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE [u].[Ema2025-10-05 19:37:46.940 -03:00 [INF] Executed DbCommand (160ms) [P2025-10-05 19:37:46.940 -03:00 [INF] Executed DbCommand (160ms) [Parameters=[@__document_0='12345678900' (Size = 20)], CommandType='"Text"', CommandTimeout='90']
SELECT TOP(1) [u].[IdUser], [u].[CreatedAt], [u].[Document], [u].[Email], [u].[FullName], [u].[Password], [u].[Role], [u].[StatusAccount], [u].[Up2025-10-05 19:37:48.987 -03:00 [INF] Executed DbCommand (176ms) [P2025-10-05 19:37:48.987 -03:00 [INF] Executed DbCommand (176ms) [Parameters=[@p0='b29c9c4c-7cc0-475e-a4f4-9003258b4256', @p1='2025-10-05T22:37:48.2234030Z', @p2='12345678900' (Nullable = false) (Size = 20), @p3='admin@fiap.com.br' (Nullable = false) (Size = 200), @p4='Jonathan Fernando da Silva' (Nullable = false) (Size = 200), @p5='$2a$11$04ZGUZ.yMlCbiflpSylRXuk62ucmqksbjBAf8T5fqJDH62g3k6/dW' (Nullable = false) (Size = 500), @p6='Admin' (Nullable = false) (Size = 50), @p7='2025-10-05T22:37:48.2234940Z' (Nullable = true)], CommandType='"Text"', CommandTimeout='90']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([IdUser], [CreatedAt], [Document], [Email], [FullName], [Password], [Role], [UpdatedAt])
OUTPUT INSERTED2025-10-05 19:37:49.230 -03:00 [INF] HTTP POST /api/User responded2025-10-05 19:37:49.22025-10-05 19:38:45.770 -03:00 [INF] JWT Settings carregados e val2025-102025-10-05 19:38:46.104 -03:00 [INF] Executed DbCommand (163ms) [P2025-10-05 19:38:46.104 -03:00 [INF] Executed DbCommand (163ms) [Parameters=[@__email_0='admin@fiap.com.br' (Size = 200)], CommandType='"Text"', CommandTimeout='90']
SELECT TOP(1) [u].[IdUser], [u].[CreatedAt], [u].[Document], [u].[Email], [u].[FullName], [u].[Password], [u].[Role], [u].[StatusAccount], [2025-10-05 19:38:48.309 -03:00 [INF] HTTP POST /api/Auth/login res2025-10-05 19:38:48.309 -032025-10-05 21:35:53.143 -03:00 [INF] Token validado: null
2025-10-05 21:35:54.961 -03:00 [INF] Executed DbCommand (203ms) [P2025-10-05 21:35:54.961 -03:00 [INF] Executed DbCommand (203ms) [Parameters=[], CommandType='"Text"', CommandTimeout='90']
SELECT [u].[IdUser], [u].[CreatedAt], [u].[Document], [u].[Email], [u].[FullName], [u].[Password], [u].[Role], [u].[StatusAccount], 2025-10-05 21:35:55.650 -03:00 [INF] HTTP GET /api/User/count resp2025-10-05 21:35:55.650 -02025-10-05 21:36:23.021 -03:00 [INF] Token validado: null
2025-10-05 21:36:23.514 -03:00 [INF] Executed DbCommand (166ms) [P2025-10-05 21:36:23.514 -03:00 [INF] Executed DbCommand (166ms) [Parameters=[@__email_0_contains='%jonathanfrnnd3@gmail.com%' (Size = 200)], CommandType='"Text"', CommandTimeout='90']
SELECT [u].[IdUser], [u].[CreatedAt], [u].[Document], [u].[Email], [u].[FullName], [u].[Password], [u].[Role], [u].[StatusAccount], [u].[UpdatedAt]
FROM [Users] AS [u]
WHERE [u].[Email] L2025-10-05 21:36:23.527 -03:00 [INF] HTTP GET /api/User/search res2025-10-05 21:36:23.527 -02025-10-05 21:36:44.200 -03:00 [INF] Token validado: null
2025-10-05 21:36:44.432 -03:00 [INF] Executed DbCommand (164ms) [P2025-10-05 21:36:44.432 -03:00 [INF] Executed DbCommand (164ms) [Parameters=[@__email_0='admin@fiap.com.br' (Size = 200)], CommandType='"Text"', CommandTimeout='90']
SELECT TOP(1) [u].[IdUser], [u].[CreatedAt], [u].[Document], [u].[Email], [u].[FullName], [u].[Password], [u].[Role], [u].[StatusAccount], [2025-10-05 21:36:44.436 -03:00 [INF] HTTP GET /api/Auth/me respond2025-10-05 21:36:44.436 -03:00 [INF] HTTP GET /api/Auth/me responded 200 in 243.4473 ms
